var login=(function(e){var d;function g(h){this.config=h;e("button[type=submit]").click(function(){d=e(this)})}function c(h){return h.indexOf("?")>=0}function f(h,i){if(c(h)){return h+"&"+i}else{return h+"?"+i}}function a(j){var k=e("#"+login.config.usernameId).val();if(k.length){var h=e(j.currentTarget),i=h.attr("href");h.attr("href",f(i,"ruid="+k))}}function b(){return d&&d[0].hasAttribute("formnovalidate")}return{init:g,openLinkWithLoginId:a,shouldSkipValidation:b}}(jQuery));(function(d){var w,t={},k="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",r,e,a=login.init;function m(x){i();v();c();d(window).bind("orientationchange",q);d(window).bind("resize",c);d(window).one("touchstart",function(){r=true;d("html").addClass("touch").css("background-attachment","initial")});d("input").blur(function(){if(r){e=true}setTimeout(function(){e=false},0)});a.call(login,x);p(x)}function i(){d("input[placeholder]:not([float-label=false])").on("focus",function(){var y=d(this).next("label.float"),z=1,x;y.removeClass("accessibly-hidden");x=y.outerWidth()+z;d(this).css("padding-right",x).data("placeholder",d(this).attr("placeholder")).attr("placeholder","");if(d(this).val()){y.css("right",0)}else{y.css("right",d(this).width()+parseInt(d(this).css("padding-left"),10));y.animate({right:0})}});d("input[placeholder]:not([float-label=false]").on("blur",function(){var x=d(this).next("label.float");if(!d(this).val()){x.addClass("accessibly-hidden");d(this).css("padding-right","")}d(this).attr("placeholder",d(this).data("placeholder"))})}function q(){var y=d(".has-footer > footer"),x=d(document).height();if(y.length){x=y.position().top}d("#background").css("height",x)}function c(){var y=b();if(y!=w){w=y;n(y)}var x=d(".overlay:visible");if(x.length){j(x)}q()}function n(){var x=d(".overlay:visible");if(x.length){j(x)}}function v(){d(".info").click(function(){var z=d(this),A=z.data("idRef")?d("#"+z.data("idRef")):z.next("[role=dialog]");o(A,z);return false});d("[role=dialog] .close, [role=dialog] .cancel").click(function(){u(d(this).closest("[role=dialog]"))});var y=null;var x=false;d(document).on({keydown:function(z){if(z.keyCode==27){u(d(".overlay:visible"))}},focusout:function(z){y=z.target},focusin:function(A){var B=d(".overlay:visible");if(B.length&&d(A.target).closest(".overlay").length==0){var z=B.find(k).first();if(z.is(y)){f(B)}else{l(B)}}}})}function h(x){x.attr("tab-index",0);x.focus()}function l(x){var y=x.find(k);y.first().focus()}function f(x){var y=x.find(k);y.last().focus()}function o(y,x){if(x){x.addClass("active")}if(!y.data("dialogType")){y.data("dialogType","overlay")}y.data("triggerElem",x);setTimeout(function(){j(y);y.slideDown(function(){d("html").css("overflow","hidden");y.attr("aria-hidden",false).css("display","");d("#background, header, main, footer").attr("aria-hidden",true);y.find("> .content").css("max-height","100%");l(y)})},e?500:0)}function u(x){if(x.is(":visible")){x.slideUp(function(){x.attr("aria-hidden",true).css("display","");d("#background, header, main, footer").attr("aria-hidden",false);x.find("> .content").css("max-height","");d("html").css("overflow","");g(x)})}}function g(y){var x=y.data("triggerElem");if(x){x.removeClass("active");if(d(":focus").closest(".overlay").is(y)){x.focus()}}}function j(A){if(A.is(".overlay")){var y=window.innerHeight||d(window).height();A.css({height:y,left:"",top:""});var z=!A.is(":visible");A.show();var x=A.find("> .content");x.css({top:Math.max(0,(y-x.outerHeight())/2),left:(A.outerWidth()-x.outerWidth())/2});if(z){A.hide()}}}function b(){return d("#breakpoints").css("font-family")}function s(y,x){t[x]=y}function p(x){if(x&&x.name){t[x.name](x)}else{for(var y in t){t[y](x)}}}login.init=m;login.getBreakpoint=b;login.registerInitFunction=s;login.showOverlay=o}(jQuery));