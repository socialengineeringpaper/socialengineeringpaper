var GridViewManager={};GridViewManager._gridViewInstanceIds=[],GridViewManager._gridViewInstances=[],GridViewManager.CreateGridViewInstance=function(n,t,i){var r=n.replace(/_Grid_ListViewUpdatePanel$/i,""),u,f;return GridViewManager._gridViewInstanceIds[r]?null:(u=new GridViewInstance(r,t,i),f=GridViewManager._gridViewInstances.length,GridViewManager._gridViewInstances[f]=u,GridViewManager._gridViewInstanceIds[r]=f,u)},GridViewManager.GetGridViewInstanceByID=function(n){var t=GridViewManager._gridViewInstanceIds[n];return GridViewManager._gridViewInstances[t]},GridViewManager.GetGridViewInstance=function(n){var t=null,i,r,u;if(n){for(i=/(_Grid_ListViewUpdatePanel)|(_LayoutUpdatePanel)$/i;n&&(!n.id||!n.id.match(i));)n=n.parentElement;n&&n.id&&(r=n.id.replace(i,""),u=GridViewManager._gridViewInstanceIds[r],t=GridViewManager._gridViewInstances[u])}else t=GridViewManager._gridViewInstances[0];return t},GridViewManager.LoadInit=function(){var t,n;for(Sys.Application.remove_load(GridViewManager.LoadInit),t=0;t<GridViewManager._gridViewInstances.length;t++)n=GridViewManager._gridViewInstances[t],n._element=$get(n._id),n._element&&(n.InvokeActionBar(),n.SetSelectedViewId(),n._allowSelectionAcrossPostbacks?n.SelectCheckBoxesByValue(n.GetSelectedValues(n._hiddenControlId)):n.SetSelectedValues(n._hiddenControlId,''));Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(GridViewManager.PartialLoadInit)},GridViewManager.PartialLoadInit=function(){for(var n,t=0;t<GridViewManager._gridViewInstances.length;t++)n=GridViewManager._gridViewInstances[t],n._element=$get(n._id),n._element&&(n._currentMask=n.CalculateMask(),n.InvokeActionBar(),n._viewsDropDownId&&n.SetSelectedViewId(),n._table=null,n._allowSelectionAcrossPostbacks?n.SelectCheckBoxesByValue(n.GetSelectedValues(n._hiddenControlId)):(n.SetSelectedValues(n._hiddenControlId,''),n.ClearCheckBoxesSelection()));typeof PageLayout!="undefined"&&PageLayout.ResizePanels()},GridViewManager._lastFocusedControlId="",GridViewManager.PageLoading=function(){document.activeElement&&(GridViewManager._lastFocusedControlId=document.activeElement.id)},GridViewManager.PageLoaded=function(){if(GridViewManager._lastFocusedControlId&&GridViewManager._lastFocusedControlId!==""){var n=$get(GridViewManager._lastFocusedControlId);n&&n.focus()}},GridViewInstance=function(n,t,i){this.Init(n,t,i)},GridViewInstance.prototype={_id:0,_actionBarIds:null,_element:null,_hiddenControlId:null,_selectingAll:!1,_currentMask:0,_externalMask:0,_selectedViewId:null,_viewsDropDownId:null,_numberOfActions:0,_viewActionBarId:null,_searchButtonId:null,_table:null,_allowSelectionAcrossPostbacks:null,SelectedIndices:function(){return $get(this._hiddenControlId).value},GetSelectedItemsCount:function(){return $get(this._hiddenControlId).value.split(';').length-1},AddSelectedItem:function(n,t){var i=n.getAttribute("ActionMask");n.checked?(this.AddSelectedKey(n.value,t),this._currentMask=this._currentMask|i):(this.RemoveSelectedKey(n.value,t),this._selectingAll||(this._currentMask=this.CalculateMask())),this._selectingAll||this.InvokeActionBar()},Submit:function(n){var t=$get(n);t!=null&&Button.SimulateClick(t)},SelectAllCheckBoxes:function(n){var r,i;for(this._selectingAll=!0,r=this._element.getElementsByTagName("input"),i=0;i<r.length;i++)r[i].type=='checkbox'&&!n.checked==r[i].checked&&this.SimulateMouseClick(r[i].getAttribute("id"));this._selectingAll=!1,n.checked||(this._currentMask=0),this.InvokeActionBar()},SelectCheckBoxesByValue:function(n){var u,f,r,i,t;if(n=";"+n,u=this.GetTable(),u!=null){for(f=u.rows,r=0;r<f.length;r++)for(i=f[r].getElementsByTagName("input"),t=0;t<i.length;t++)(i[t].type=='checkbox'||i[t].type=='radio')&&n.indexOf(";"+i[t].value+";")>-1&&this.SimulateMouseClick(i[t].getAttribute("id"));this.InvokeActionBar()}},ClearCheckBoxesSelection:function(){for(var t=this._element.getElementsByTagName("input"),n=0;n<t.length;n++)t[n].type=='checkbox'&&t[n].checked&&this.SimulateMouseClick(t[n].getAttribute("id"))},CalculateMask:function(){for(var r=this._element.getElementsByTagName("input"),u,f=0,i=0;i<r.length;i++)r[i].type=='checkbox'&&r[i].checked&&(u=r[i].getAttribute("ActionMask"),u&&(f=f|u));return f},SetSelectedItem:function(n,t){this.SetSelectedValues(t,n)},SetSelectedRadioButton:function(n,t){this.SetSelectedItem(n.getAttribute("value")+";",t),this._currentMask=n.getAttribute("ActionMask"),this.InvokeActionBar()},AddSelectedKey:function(n,t){values=this.GetSelectedValues(t),index=values.indexOf(n+";",0),index>0&&(index=values.indexOf(";"+n+";",0)),index<0&&(values=values+n+";",this.SetSelectedValues(t,values))},RemoveSelectedKey:function(n,t){values=this.GetSelectedValues(t),index=values.indexOf(n+";",0),index>0&&(index=values.indexOf(";"+n+";",0)),index>0?values=values.replace(";"+n+";",";"):index==0&&(values=values.replace(n+";","")),this.SetSelectedValues(t,values)},GetSelectedValues:function(n){return values=$get(n).value},SetSelectedValues:function(n,t){var i=$get(n);i&&(i.value=t)},SetExternalMask:function(n){this._externalMask=n},GetExternalMask:function(){return this._externalMask},SimulateMouseClick:function(n){var t=$get(n),i;t&&(t.click!=null?t.click():(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(i)))},InvokeSort:function(n,t,i,r){btn=$get(n),optionsField=$get(t),btn&&optionsField&&(optionsField.value=i+':'+r,Button.SimulateClick(btn))},OnSearchButtonClientClick:function(n){var t=null;typeof PageModifiedWarning!="undefined"&&(t=PageModifiedWarning.Enabled,PageModifiedWarning.Enabled=!1),__doPostBack(n,"Search"),t!=null&&(PageModifiedWarning.Enabled=t)},InvokePaging:function(n,t){var i=null;typeof PageModifiedWarning!="undefined"&&(i=PageModifiedWarning.Enabled,PageModifiedWarning.Enabled=!1),__doPostBack(n,t),i!=null&&(PageModifiedWarning.Enabled=i)},Refresh:function(){btn=$get(this._searchButtonId),btn&&Button.SimulateClick(btn)},InvokeSearch:function(n,t){if((n.which||n.keyCode)&&(n.which==13||n.keyCode==13)){if(btn=$get(t),btn){var i=n.srcElement?n.srcElement:n.target;i&&i.blur(),Button.SimulateClick(btn)}return n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation(),!1}return!0},InvokeActionBar:function(){if(this._actionBarIds&&this._actionBarIds.length>0)for(var n=0;n<this._actionBarIds.length;n++)ActionBar.SetEnabledState(this._actionBarIds[n],this._currentMask|this._externalMask,this.GetSelectedItemsCount()>1)},Init:function(n,t,i){this._id=n,this._hiddenControlId=t,this._allowSelectionAcrossPostbacks=i},ActionBarInit:function(n,t,i){this._actionBarIds=n.split(';'),this._searchButtonId=t,this._viewActionBarId=i},ViewSelectorInit:function(n,t){var r,i,u,f,e;if(this._viewsDropDownId=n,this._numberOfActions=t,r=$get(n),r){if(i=r.offsetWidth,i==0){for(u=0,f=0;f<r.options.length;f++)e=r.options[f].innerText.length,u=e>u?e:u;i=20*u}i<100?i=100:i>500&&(i=500),r.style.width=i+"px"}},SetSelectedViewId:function(n){if(this._viewsDropDownId){var t=$get(this._viewsDropDownId);t!=null&&(n&&(t.value=n),this._selectedViewId=t.options[t.selectedIndex].value),this._viewActionBarId!=null&&ActionBar.SetEnabledState(this._viewActionBarId,this._currentMask|this._externalMask,!1)}},CheckedChanged:function(n,t,i){var r=!0,u;return n.checked||(t.checked=!1),i&&(u=n.parentElement.parentElement,r=i(n,this.GetRowData(u))),r},GetTable:function(){var t,n;if(this._table==null&&this._element!=null)for(t=this._element.getElementsByTagName("TABLE"),n=0;n<t.length;n++)if(t[n].className=="gridViewTable"){this._table=t[n];break}return this._table},GetRowData:function(n){for(var r=[],u=n.cells,i,t=0;t<u.length;t++)i=u[t].firstChild,r[t]=i.tagName=="SPAN"?i.innerHTML:i.tagName=="INPUT"?i.value:null;return r},CalculateAndSetMask:function(){this._currentMask=this.CalculateMask()}}